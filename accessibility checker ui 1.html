<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AccessibilityPro - Professional Accessibility Checker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --background: #0f172a;
            --surface: #1e293b;
            --surface-light: #334155;
            --text: #f1f5f9;
            --text-muted: #94a3b8;
            --border: #475569;
            --success: #22c55e;
            --info: #3b82f6;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--background) 0%, #1a202c 100%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .header {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            padding: 1.5rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: between;
            gap: 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .main {
            padding: 3rem 0;
        }

        .hero {
            text-align: center;
            margin-bottom: 4rem;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 900;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--text) 0%, var(--text-muted) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.25rem;
            color: var(--text-muted);
            max-width: 600px;
            margin: 0 auto;
        }

        .analyzer-section {
            background: var(--surface);
            border-radius: 24px;
            padding: 2rem;
            margin-bottom: 3rem;
            border: 1px solid var(--border);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .input-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            background: var(--surface-light);
            padding: 0.5rem;
            border-radius: 16px;
        }

        .tab-button {
            flex: 1;
            padding: 1rem 1.5rem;
            background: transparent;
            border: none;
            border-radius: 12px;
            color: var(--text-muted);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-button.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text);
        }

        .text-input {
            width: 100%;
            padding: 1rem;
            background: var(--background);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: var(--text);
            font-size: 1rem;
            transition: all 0.3s ease;
            resize: vertical;
        }

        .text-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .analyze-button {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .analyze-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.4);
        }

        .analyze-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading-spinner {
            display: none;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s linear infinite;
            margin-right: 0.5rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .results {
            display: none;
            margin-top: 3rem;
        }

        .score-overview {
            background: var(--surface);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
            border: 1px solid var(--border);
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 900;
            position: relative;
            background: conic-gradient(var(--success) 0deg, var(--success) var(--score-angle, 0deg), var(--surface-light) var(--score-angle, 0deg));
        }

        .score-inner {
            width: 80px;
            height: 80px;
            background: var(--surface);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .result-card {
            background: var(--surface);
            border-radius: 16px;
            padding: 1.5rem;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .result-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text);
        }

        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .status-pass { background: var(--success); }
        .status-warning { background: var(--warning); }
        .status-fail { background: var(--error); }
        .status-info { background: var(--info); }

        .check-list {
            list-style: none;
        }

        .check-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(71, 85, 105, 0.3);
        }

        .check-item:last-child {
            border-bottom: none;
        }

        .check-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
        }

        .check-pass { background: var(--success); color: white; }
        .check-warning { background: var(--warning); color: white; }
        .check-fail { background: var(--error); color: white; }

        .check-details {
            flex: 1;
        }

        .check-name {
            font-weight: 600;
            color: var(--text);
            margin-bottom: 0.25rem;
        }

        .check-description {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .stat-card {
            background: var(--surface-light);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 900;
            color: var(--primary);
        }

        .stat-label {
            color: var(--text-muted);
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }

        .recommendations {
            background: var(--surface);
            border-radius: 16px;
            padding: 2rem;
            margin-top: 2rem;
            border: 1px solid var(--border);
        }

        .recommendations h3 {
            color: var(--text);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .recommendation-list {
            list-style: none;
        }

        .recommendation-item {
            background: var(--surface-light);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 0.75rem;
            border-left: 4px solid var(--primary);
        }

        .recommendation-title {
            font-weight: 600;
            color: var(--text);
            margin-bottom: 0.25rem;
        }

        .recommendation-desc {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 1rem;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">A11y</div>
                    <span>AccessibilityPro</span>
                </div>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <section class="hero">
                <h1>Professional Accessibility Checker</h1>
                <p>Comprehensive WCAG compliance analysis for modern web applications. Get detailed insights and actionable recommendations.</p>
            </section>

            <section class="analyzer-section">
                <div class="input-tabs">
                    <button class="tab-button active" onclick="switchTab('html')">HTML Code</button>
                    <button class="tab-button" onclick="switchTab('url')">Website URL</button>
                </div>

                <div id="html-tab" class="tab-content active">
                    <div class="input-group">
                        <label class="input-label" for="html-input">Paste your HTML code:</label>
                        <textarea id="html-input" class="text-input" rows="12" placeholder="<html>&#10;  <head>&#10;    <title>Your webpage</title>&#10;  </head>&#10;  <body>&#10;    <!-- Your content here -->&#10;  </body>&#10;</html>"></textarea>
                    </div>
                </div>

                <div id="url-tab" class="tab-content">
                    <div class="input-group">
                        <label class="input-label" for="url-input">Enter website URL:</label>
                        <input type="url" id="url-input" class="text-input" placeholder="https://example.com">
                    </div>
                </div>

                <button class="analyze-button" onclick="analyzeAccessibility()">
                    <div class="loading-spinner"></div>
                    <span class="button-text">Analyze Accessibility</span>
                </button>
            </section>

            <section id="results" class="results">
                <div class="score-overview">
                    <div class="score-circle">
                        <div class="score-inner" id="score-display">0</div>
                    </div>
                    <h2>Accessibility Score</h2>
                    <p id="score-description">Complete analysis results</p>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="total-checks">0</div>
                            <div class="stat-label">Total Checks</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="passed-checks">0</div>
                            <div class="stat-label">Passed</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="warning-checks">0</div>
                            <div class="stat-label">Warnings</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="failed-checks">0</div>
                            <div class="stat-label">Failed</div>
                        </div>
                    </div>
                </div>

                <div class="results-grid" id="results-grid">
                    <!-- Results will be populated here -->
                </div>

                <div class="recommendations">
                    <h3>ðŸŽ¯ Priority Recommendations</h3>
                    <ul class="recommendation-list" id="recommendations-list">
                        <!-- Recommendations will be populated here -->
                    </ul>
                </div>
            </section>
        </div>
    </main>

    <script>
        let currentAnalysis = null;

        function switchTab(tab) {
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            document.querySelector(`[onclick="switchTab('${tab}')"]`).classList.add('active');
            document.getElementById(`${tab}-tab`).classList.add('active');
        }

        function analyzeAccessibility() {
            const button = document.querySelector('.analyze-button');
            const spinner = document.querySelector('.loading-spinner');
            const buttonText = document.querySelector('.button-text');
            const resultsSection = document.getElementById('results');
            
            // Get input based on active tab
            const activeTab = document.querySelector('.tab-content.active').id;
            let input = '';
            
            if (activeTab === 'html-tab') {
                input = document.getElementById('html-input').value.trim();
            } else {
                input = document.getElementById('url-input').value.trim();
            }
            
            if (!input) {
                alert('Please provide HTML code or a URL to analyze');
                return;
            }
            
            // Show loading state
            button.disabled = true;
            spinner.style.display = 'inline-block';
            buttonText.textContent = 'Analyzing...';
            resultsSection.style.display = 'none';
            
            // Simulate analysis (replace with actual API call in production)
            setTimeout(() => {
                const analysis = performAccessibilityAnalysis(input, activeTab);
                displayResults(analysis);
                
                // Reset button state
                button.disabled = false;
                spinner.style.display = 'none';
                buttonText.textContent = 'Analyze Accessibility';
                resultsSection.style.display = 'block';
                resultsSection.scrollIntoView({ behavior: 'smooth' });
            }, 2000);
        }

        function performAccessibilityAnalysis(input, inputType) {
            // Parse HTML if it's HTML input
            let doc;
            if (inputType === 'html-tab') {
                const parser = new DOMParser();
                doc = parser.parseFromString(input, 'text/html');
            } else {
                // For URL input, we'll simulate checks since we can't actually fetch
                doc = document.createElement('div');
                doc.innerHTML = '<html><body><h1>Sample content</h1><img src="test.jpg"><button>Click me</button></body></html>';
            }
            
            const checks = [
                // Images and Media
                {
                    category: 'Images & Media',
                    icon: 'ðŸ–¼ï¸',
                    checks: [
                        checkImageAltText(doc),
                        checkImageDecorative(doc),
                        checkVideoControls(doc),
                        checkAudioDescriptions(doc)
                    ]
                },
                // Navigation & Structure
                {
                    category: 'Navigation & Structure',
                    icon: 'ðŸ§­',
                    checks: [
                        checkHeadingStructure(doc),
                        checkLandmarkRoles(doc),
                        checkSkipLinks(doc),
                        checkPageTitle(doc)
                    ]
                },
                // Forms & Interactivity
                {
                    category: 'Forms & Interactivity',
                    icon: 'ðŸ“',
                    checks: [
                        checkFormLabels(doc),
                        checkFocusManagement(doc),
                        checkButtonText(doc),
                        checkTabOrder(doc)
                    ]
                },
                // Color & Contrast
                {
                    category: 'Color & Contrast',
                    icon: 'ðŸŽ¨',
                    checks: [
                        checkColorContrast(doc),
                        checkColorDependency(doc),
                        checkFocusIndicators(doc),
                        checkLinkDistinction(doc)
                    ]
                },
                // ARIA & Semantics
                {
                    category: 'ARIA & Semantics',
                    icon: 'âš¡',
                    checks: [
                        checkAriaLabels(doc),
                        checkAriaDescriptions(doc),
                        checkLiveRegions(doc),
                        checkSemanticHTML(doc)
                    ]
                }
            ];
            
            return {
                input: input,
                inputType: inputType,
                categories: checks,
                timestamp: new Date().toISOString()
            };
        }

        // Accessibility Check Functions
        function checkImageAltText(doc) {
            const images = doc.querySelectorAll('img');
            const imagesWithoutAlt = Array.from(images).filter(img => !img.hasAttribute('alt'));
            
            return {
                name: 'Image Alt Text',
                description: 'All images must have descriptive alt text',
                status: imagesWithoutAlt.length === 0 ? 'pass' : 'fail',
                details: `${images.length - imagesWithoutAlt.length}/${images.length} images have alt text`,
                wcag: 'WCAG 2.1 Level A'
            };
        }

        function checkImageDecorative(doc) {
            const decorativeImages = doc.querySelectorAll('img[alt=""], img[role="presentation"]');
            return {
                name: 'Decorative Images',
                description: 'Decorative images should have empty alt or presentation role',
                status: 'pass',
                details: `${decorativeImages.length} decorative images properly marked`,
                wcag: 'WCAG 2.1 Level A'
            };
        }

        function checkVideoControls(doc) {
            const videos = doc.querySelectorAll('video');
            const videosWithControls = Array.from(videos).filter(video => video.hasAttribute('controls'));
            
            return {
                name: 'Video Controls',
                description: 'Videos must have accessible controls',
                status: videos.length === 0 ? 'pass' : (videosWithControls.length === videos.length ? 'pass' : 'warning'),
                details: videos.length === 0 ? 'No videos found' : `${videosWithControls.length}/${videos.length} videos have controls`,
                wcag: 'WCAG 2.1 Level A'
            };
        }

        function checkAudioDescriptions(doc) {
            const videos = doc.querySelectorAll('video');
            return {
                name: 'Audio Descriptions',
                description: 'Videos should include audio descriptions for visual content',
                status: videos.length === 0 ? 'pass' : 'warning',
                details: videos.length === 0 ? 'No videos found' : 'Manual review required for audio descriptions',
                wcag: 'WCAG 2.1 Level AA'
            };
        }

        function checkHeadingStructure(doc) {
            const headings = doc.querySelectorAll('h1, h2, h3, h4, h5, h6');
            const h1Count = doc.querySelectorAll('h1').length;
            
            return {
                name: 'Heading Structure',
                description: 'Proper heading hierarchy (h1-h6) for screen readers',
                status: h1Count === 1 ? 'pass' : (h1Count === 0 ? 'fail' : 'warning'),
                details: `Found ${headings.length} headings, ${h1Count} h1 elements`,
                wcag: 'WCAG 2.1 Level AA'
            };
        }

        function checkLandmarkRoles(doc) {
            const landmarks = doc.querySelectorAll('main, nav, header, footer, aside, section[role], div[role]');
            return {
                name: 'Landmark Roles',
                description: 'Page structure defined with ARIA landmarks',
                status: landmarks.length > 0 ? 'pass' : 'warning',
                details: `${landmarks.length} landmark elements found`,
                wcag: 'WCAG 2.1 Level AA'
            };
        }

        function checkSkipLinks(doc) {
            const skipLinks = doc.querySelectorAll('a[href^="#"]');
            const skipToMain = Array.from(skipLinks).some(link => 
                link.textContent.toLowerCase().includes('skip') && 
                link.textContent.toLowerCase().includes('main')
            );
            
            return {
                name: 'Skip Links',
                description: 'Skip navigation links for keyboard users',
                status: skipToMain ? 'pass' : 'warning',
                details: skipToMain ? 'Skip to main content link found' : 'Consider adding skip navigation links',
                wcag: 'WCAG 2.1 Level A'
            };
        }

        function checkPageTitle(doc) {
            const title = doc.querySelector('title');
            const hasTitle = title && title.textContent.trim().length > 0;
            
            return {
                name: 'Page Title',
                description: 'Descriptive page title for context',
                status: hasTitle ? 'pass' : 'fail',
                details: hasTitle ? `Title: "${title.textContent.trim()}"` : 'Missing or empty page title',
                wcag: 'WCAG 2.1 Level A'
            };
        }

        function checkFormLabels(doc) {
            const inputs = doc.querySelectorAll('input, textarea, select');
            const inputsWithLabels = Array.from(inputs).filter(input => {
                const id = input.id;
                const ariaLabel = input.getAttribute('aria-label');
                const ariaLabelledby = input.getAttribute('aria-labelledby');
                const label = id ? doc.querySelector(`label[for="${id}"]`) : null;
                
                return label || ariaLabel || ariaLabelledby;
            });
            
            return {
                name: 'Form Labels',
                description: 'All form inputs must have accessible labels',
                status: inputs.length === 0 ? 'pass' : (inputsWithLabels.length === inputs.length ? 'pass' : 'fail'),
                details: inputs.length === 0 ? 'No form inputs found' : `${inputsWithLabels.length}/${inputs.length} inputs have labels`,
                wcag: 'WCAG 2.1 Level A'
            };
        }

        function checkFocusManagement(doc) {
            const focusableElements = doc.querySelectorAll('a, button, input, textarea, select, [tabindex]');
            const tabindexNegative = doc.querySelectorAll('[tabindex="-1"]');
            
            return {
                name: 'Focus Management',
                description: 'Proper keyboard focus order and visibility',
                status: 'warning',
                details: `${focusableElements.length} focusable elements, manual testing required`,
                wcag: 'WCAG 2.1 Level AA'
            };
        }

        function checkButtonText(doc) {
            const buttons = doc.querySelectorAll('button, input[type="button"], input[type="submit"]');
            const buttonsWithText = Array.from(buttons).filter(btn => {
                const text = btn.textContent || btn.value || btn.getAttribute('aria-label');
                return text && text.trim().length > 0;
            });
            
            return {
                name: 'Button Text',
                description: 'Buttons must have descriptive text or labels',
                status: buttons.length === 0 ? 'pass' : (buttonsWithText.length === buttons.length ? 'pass' : 'fail'),
                details: buttons.length === 0 ? 'No buttons found' : `${buttonsWithText.length}/${buttons.length} buttons have descriptive text`,
                wcag: 'WCAG 2.1 Level A'
            };
        }

        function checkTabOrder(doc) {
            const tabindexElements = doc.querySelectorAll('[tabindex]');
            const positiveTabindex = Array.from(tabindexElements).filter(el => {
                const tabindex = parseInt(el.getAttribute('tabindex'));
                return tabindex > 0;
            });
            
            return {
                name: 'Tab Order',
                description: 'Logical keyboard navigation order',
                status: positiveTabindex.length === 0 ? 'pass' : 'warning',
                details: positiveTabindex.length === 0 ? 'No positive tabindex values found' : `${positiveTabindex.length} elements with positive tabindex`,
                wcag: 'WCAG 2.1 Level A'
            };
        }

        function checkColorContrast(doc) {
            // This would require actual color analysis in production
            return {
                name: 'Color Contrast',
                description: 'Text contrast meets WCAG AA standards (4.5:1)',
                status: 'warning',
                details: 'Manual contrast testing required - use tools like WebAIM Contrast Checker',
                wcag: 'WCAG 2.1 Level AA'
            };
        }

        function checkColorDependency(doc) {
            return {
                name: 'Color Dependency',
                description: 'Information not conveyed by color alone',
                status: 'pass',
                details: 'Manual review required for color-dependent information',
                wcag: 'WCAG 2.1 Level A'
            };
        }

        function checkFocusIndicators(doc) {
            return {
                name: 'Focus Indicators',
                description: 'Visible focus indicators for keyboard navigation',
                status: 'warning',
                details: 'Focus indicators require manual testing and CSS analysis',
                wcag: 'WCAG 2.1 Level AA'
            };
        }

        function checkLinkDistinction(doc) {
            const links = doc.querySelectorAll('a');
            return {
                name: 'Link Distinction',
                description: 'Links are distinguishable from regular text',
                status: links.length > 0 ? 'warning' : 'pass',
                details: links.length > 0 ? 'Manual review required for link visual distinction' : 'No links found',
                wcag: 'WCAG 2.1 Level A'
            };
        }

        function checkAriaLabels(doc) {
            const ariaLabels = doc.querySelectorAll('[aria-label]');
            const ariaLabelledby = doc.querySelectorAll('[aria-labelledby]');
            
            return {
                name: 'ARIA Labels',
                description: 'Proper ARIA labeling for interactive elements',
                status: 'pass',
                details: `${ariaLabels.length} aria-label, ${ariaLabelledby.length} aria-labelledby attributes found`,
                wcag: 'WCAG 2.1 Level A'
            };
        }

        function checkAriaDescriptions(doc) {
            const ariaDescribedby = doc.querySelectorAll('[aria-describedby]');
            const ariaDescription = doc.querySelectorAll('[aria-description]');
            
            return {
                name: 'ARIA Descriptions',
                description: 'Additional context through ARIA descriptions',
                status: 'pass',
                details: `${ariaDescribedby.length} aria-describedby, ${ariaDescription.length} aria-description attributes found`,
                wcag: 'WCAG 2.1 Level AA'
            };
        }

        function checkLiveRegions(doc) {
            const liveRegions = doc.querySelectorAll('[aria-live]');
            const ariaAtomic = doc.querySelectorAll('[aria-atomic]');
            
            return {
                name: 'Live Regions',
                description: 'Dynamic content updates announced to screen readers',
                status: liveRegions.length > 0 ? 'pass' : 'warning',
                details: `${liveRegions.length} live regions found`,
                wcag: 'WCAG 2.1 Level AA'
            };
        }

        function checkSemanticHTML(doc) {
            const semanticElements = doc.querySelectorAll('main, nav, header, footer, aside, article, section');
            const divSpanCount = doc.querySelectorAll('div, span').length;
            const semanticRatio = semanticElements.length / Math.max(1, divSpanCount) * 100;
            
            return {
                name: 'Semantic HTML',
                description: 'Use of semantic HTML5 elements for structure',
                status: semanticElements.length > 0 ? 'pass' : 'warning',
                details: `${semanticElements.length} semantic elements found, ${semanticRatio.toFixed(1)}% semantic ratio`,
                wcag: 'WCAG 2.1 Level AA'
            };
        }

        function displayResults(analysis) {
            currentAnalysis = analysis;
            
            // Calculate overall statistics
            let totalChecks = 0;
            let passedChecks = 0;
            let warningChecks = 0;
            let failedChecks = 0;
            
            analysis.categories.forEach(category => {
                category.checks.forEach(check => {
                    totalChecks++;
                    if (check.status === 'pass') passedChecks++;
                    else if (check.status === 'warning') warningChecks++;
                    else if (check.status === 'fail') failedChecks++;
                });
            });
            
            // Calculate score (weighted: pass=1, warning=0.5, fail=0)
            const score = Math.round(((passedChecks + warningChecks * 0.5) / totalChecks) * 100);
            
            // Update score display
            document.getElementById('score-display').textContent = score;
            document.getElementById('total-checks').textContent = totalChecks;
            document.getElementById('passed-checks').textContent = passedChecks;
            document.getElementById('warning-checks').textContent = warningChecks;
            document.getElementById('failed-checks').textContent = failedChecks;
            
            // Update score circle color and description
            const scoreCircle = document.querySelector('.score-circle');
            let scoreColor = 'var(--success)';
            let scoreDescription = 'Excellent accessibility compliance';
            
            if (score < 50) {
                scoreColor = 'var(--error)';
                scoreDescription = 'Critical accessibility issues need attention';
            } else if (score < 75) {
                scoreColor = 'var(--warning)';
                scoreDescription = 'Good progress, some improvements needed';
            } else if (score < 90) {
                scoreColor = 'var(--info)';
                scoreDescription = 'Very good accessibility compliance';
            }
            
            scoreCircle.style.setProperty('--score-angle', `${score * 3.6}deg`);
            scoreCircle.style.background = `conic-gradient(${scoreColor} 0deg, ${scoreColor} ${score * 3.6}deg, var(--surface-light) ${score * 3.6}deg)`;
            document.getElementById('score-description').textContent = scoreDescription;
            
            // Generate results cards
            const resultsGrid = document.getElementById('results-grid');
            resultsGrid.innerHTML = '';
            
            analysis.categories.forEach(category => {
                const categoryCard = createCategoryCard(category);
                resultsGrid.appendChild(categoryCard);
            });
            
            // Generate recommendations
            generateRecommendations(analysis);
        }

        function createCategoryCard(category) {
            const card = document.createElement('div');
            card.className = 'result-card';
            
            // Determine overall category status
            const statuses = category.checks.map(check => check.status);
            let categoryStatus = 'pass';
            if (statuses.includes('fail')) categoryStatus = 'fail';
            else if (statuses.includes('warning')) categoryStatus = 'warning';
            
            const statusClass = `status-${categoryStatus}`;
            const checkIcon = categoryStatus === 'pass' ? 'âœ“' : categoryStatus === 'warning' ? '!' : 'âœ—';
            
            card.innerHTML = `
                <div class="card-header">
                    <h3 class="card-title">${category.category}</h3>
                    <div class="card-icon ${statusClass}">${category.icon}</div>
                </div>
                <ul class="check-list">
                    ${category.checks.map(check => `
                        <li class="check-item">
                            <div class="check-icon check-${check.status}">
                                ${check.status === 'pass' ? 'âœ“' : check.status === 'warning' ? '!' : 'âœ—'}
                            </div>
                            <div class="check-details">
                                <div class="check-name">${check.name}</div>
                                <div class="check-description">${check.description}</div>
                                <div class="check-description" style="margin-top: 0.25rem; font-weight: 500;">
                                    ${check.details} â€¢ ${check.wcag}
                                </div>
                            </div>
                        </li>
                    `).join('')}
                </ul>
            `;
            
            return card;
        }

        function generateRecommendations(analysis) {
            const recommendationsList = document.getElementById('recommendations-list');
            const recommendations = [];
            
            // Collect failed and warning checks for recommendations
            analysis.categories.forEach(category => {
                category.checks.forEach(check => {
                    if (check.status === 'fail') {
                        recommendations.push({
                            priority: 'high',
                            title: `Fix: ${check.name}`,
                            description: getRecommendationText(check.name, 'fail')
                        });
                    } else if (check.status === 'warning') {
                        recommendations.push({
                            priority: 'medium',
                            title: `Improve: ${check.name}`,
                            description: getRecommendationText(check.name, 'warning')
                        });
                    }
                });
            });
            
            // Add general best practices
            recommendations.push(
                {
                    priority: 'low',
                    title: 'Conduct Manual Testing',
                    description: 'Use screen readers and keyboard-only navigation to test real user experience'
                },
                {
                    priority: 'low',
                    title: 'Regular Accessibility Audits',
                    description: 'Schedule monthly accessibility reviews and user testing with disabled users'
                },
                {
                    priority: 'medium',
                    title: 'Implement Automated Testing',
                    description: 'Integrate tools like axe-core into your CI/CD pipeline for continuous monitoring'
                }
            );
            
            // Sort by priority and limit to top 8
            const priorityOrder = { high: 3, medium: 2, low: 1 };
            recommendations.sort((a, b) => priorityOrder[b.priority] - priorityOrder[a.priority]);
            const topRecommendations = recommendations.slice(0, 8);
            
            recommendationsList.innerHTML = topRecommendations.map(rec => `
                <li class="recommendation-item">
                    <div class="recommendation-title">${rec.title}</div>
                    <div class="recommendation-desc">${rec.description}</div>
                </li>
            `).join('');
        }

        function getRecommendationText(checkName, status) {
            const recommendations = {
                'Image Alt Text': {
                    fail: 'Add descriptive alt attributes to all images. Alt text should convey the same information as the image.',
                    warning: 'Review existing alt text to ensure it\'s descriptive and meaningful for screen reader users.'
                },
                'Heading Structure': {
                    fail: 'Ensure there is exactly one h1 per page and headings follow logical hierarchy (h1â†’h2â†’h3).',
                    warning: 'Review heading structure for logical flow and consider adding missing heading levels.'
                },
                'Form Labels': {
                    fail: 'Associate every form input with a label using <label for="id"> or aria-label attributes.',
                    warning: 'Verify all form labels are descriptive and clearly indicate the expected input.'
                },
                'Button Text': {
                    fail: 'Ensure all buttons have descriptive text content or aria-label attributes that explain their function.',
                    warning: 'Review button text to make sure it clearly describes the action that will be performed.'
                },
                'Page Title': {
                    fail: 'Add a unique, descriptive title to every page that identifies the page content or purpose.',
                    warning: 'Review page titles to ensure they are specific and help users understand page context.'
                },
                'Color Contrast': {
                    warning: 'Test text contrast ratios using tools like WebAIM Contrast Checker. Ensure 4.5:1 minimum ratio.'
                },
                'Focus Management': {
                    warning: 'Test keyboard navigation and ensure focus indicators are visible and logical.'
                }
            };
            
            return recommendations[checkName]?.[status] || 'Review this accessibility aspect and implement WCAG 2.1 guidelines.';
        }

        // Add some demo data for showcase
        function loadDemoData() {
            const demoHTML = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo Page - Accessibility Test</title>
</head>
<body>
    <header>
        <nav aria-label="Main navigation">
            <ul>
                <li><a href="#home">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>
    </header>
    
    <main>
        <h1>Welcome to Our Demo Page</h1>
        
        <section>
            <h2>About Our Service</h2>
            <p>This is a sample page to demonstrate accessibility features.</p>
            <img src="demo.jpg" alt="Team working together in modern office">
        </section>
        
        <section>
            <h2>Contact Form</h2>
            <form>
                <label for="name">Full Name:</label>
                <input type="text" id="name" required>
                
                <label for="email">Email Address:</label>
                <input type="email" id="email" required>
                
                <label for="message">Message:</label>
                <textarea id="message" rows="4"></textarea>
                
                <button type="submit">Send Message</button>
            </form>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2025 Demo Company. All rights reserved.</p>
    </footer>
</body>
</html>`;
            
            document.getElementById('html-input').value = demoHTML;
        }

        // Initialize with demo data
        document.addEventListener('DOMContentLoaded', function() {
            loadDemoData();
            
            // Add keyboard navigation support
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && e.target.classList.contains('analyze-button')) {
                    analyzeAccessibility();
                }
            });
        });

        // Add smooth animations
        function animateElements() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            });

            document.querySelectorAll('.result-card, .stat-card').forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
                el.style.transition = 'all 0.6s ease';
                observer.observe(el);
            });
        }

        // Call animations after results are displayed
        const originalDisplayResults = displayResults;
        displayResults = function(analysis) {
            originalDisplayResults(analysis);
            setTimeout(animateElements, 100);
        };
    </script>
</body>
</html>